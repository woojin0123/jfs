<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS reduce()</title>
</head>

<body>
    <script>
        /*
        ** 초기값 필수
        arr.reduce((누적값, 현재값, 인덱스, 원본배열) => {
          // 실행 로직
          return 새로운누적값;
        }, 초기값);
        */
        const numbers = [1, 2, 3, 4];
        // 배열.reduce(콜백함수, 초기값);
        /* 
        배열.reduce((누적값, 현재값) => acc + cur, 초기값);
        : {return 값;} -> 값
        */
        const sum = numbers.reduce((acc, cur) => acc + cur, 0);
        console.log(sum); // 10

        // 배열 내에 중복 요소 개수 세기
        const fruits = ['apple', 'banana', 'apple', 'orange', 'banana'];

        const count = fruits.reduce((acc, fruit) => {
            acc[fruit] = (acc[fruit] || 0) + 1;
            return acc;
        }, {});

        console.log(count);
        // { apple: 2, banana: 2, orange: 1 }

        // 2차원 배열 → 1차원 배열 (평탄화)
        const arr = [[1, 2], [3, 4], [5]];
        const flat = arr.reduce((acc, cur) => acc.concat(cur), []);
        console.log(flat); // [1, 2, 3, 4, 5]

        //  JSX 누적 렌더링
        const List = ({ items }) => {
            return (
                <ul>
                    {items.reduce((acc, item, index) => {
                        acc.push(<li key={index}>{item}</li>);
                        return acc;
                    }, [])}
                </ul>
            );
        };

        // 사용
        <List items={['React', 'Vue', 'Svelte']} />

        // 상태값 집계
        const CartTotal = ({ cart }) => {
            const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
            return <h3>총 합계: {total}원</h3>;
        };



    </script>
</body>

</html>